<app-loader *ngIf="loading; else not_load"></app-loader>
<ng-template #not_load>
  <div class="ui-form my-3">
    <form [formGroup]="userForm" (submit)="handleSubmitForm($event)">
      <h1 class="text-center">User Form</h1>
      <div class="form-group my-3">
        <label class="form-label">First name</label>
        <input
          [class]="{
            'form-control': true,
            'is-invalid':
              firstName?.invalid &&
              (firstName?.dirty || firstName?.touched || isSubmitForm)
          }"
          type="text"
          name="firstName"
          placeholder="First Name"
          formControlName="firstName"
        />
        <div
          *ngIf="
            firstName?.invalid &&
            (firstName?.dirty || firstName?.touched || isSubmitForm)
          "
          class="invalid-feedback"
        >
          <div *ngIf="firstName?.errors?.['required']">
            First Name is required.
          </div>
        </div>
      </div>

      <div class="form-group my-3">
        <label class="form-label">Last name</label>
        <input
          [class]="{
            'form-control': true,
            'is-invalid':
              lastName?.invalid &&
              (lastName?.dirty || lastName?.touched || isSubmitForm)
          }"
          type="text"
          name="lastName"
          placeholder="Last Name"
          formControlName="lastName"
        />
        <div
          *ngIf="
            lastName?.invalid &&
            (lastName?.dirty || lastName?.touched || isSubmitForm)
          "
          class="invalid-feedback"
        >
          <div *ngIf="lastName?.errors?.['required']">
            Last Name is required.
          </div>
        </div>
      </div>

      <div class="form-group my-3">
        <label class="form-label">E-mail</label>
        <input
          [class]="{
            'form-control': true,
            'is-invalid':
              email?.invalid && (email?.dirty || email?.touched || isSubmitForm)
          }"
          type="email"
          name="email"
          placeholder="joe@schmoe.com"
          formControlName="email"
        />
        <div
          *ngIf="
            email?.invalid && (email?.dirty || email?.touched || isSubmitForm)
          "
        >
          <div class="invalid-feedback" *ngIf="email?.errors?.['required']">
            Email is required.
          </div>
        </div>
      </div>

      <div class="form-group my-3">
        <label class="form-label">Username</label>
        <input
          [class]="{
            'form-control': true,
            'is-invalid':
              userName?.invalid &&
              (userName?.dirty || userName?.touched || isSubmitForm)
          }"
          type="text"
          name="userName"
          placeholder="Username"
          formControlName="userName"
        />
        <div
          *ngIf="
            userName?.invalid &&
            (userName?.dirty || userName?.touched || isSubmitForm)
          "
          class="invalid-feedback"
        >
          <div *ngIf="userName?.errors?.['required']">
            Username is required.
          </div>
        </div>
      </div>

      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          id="active"
          name="active"
          formControlName="active"
        />
        <label class="form-check-label" htmlFor="active"> Active </label>
      </div>

      <div class="form-group my-3">
        <label class="form-label">Role</label>
        <select
          [class]="{
            'form-select': true,
            'is-invalid':
              roleId?.invalid &&
              (roleId?.dirty || roleId?.touched || isSubmitForm)
          }"
          name="role"
          formControlName="roleId"
        >
          <option value="" disabled>role</option>
          <option *ngFor="let role of app.roles" [value]="role.id">
            {{ role.name }}
          </option>
        </select>
        <div
          *ngIf="
            roleId?.invalid &&
            (roleId?.dirty || roleId?.touched || isSubmitForm)
          "
          class="invalid-feedback"
        >
          <div *ngIf="roleId?.errors?.['required']">Role is required.</div>
        </div>
      </div>

      <div class="form-group my-3">
        <label class="form-label">Positions</label>
        <select
          [class]="{
            'form-select': true,
            'is-invalid':
              positionId?.invalid &&
              (positionId?.dirty || positionId?.touched || isSubmitForm)
          }"
          name="position"
          formControlName="positionId"
        >
          <option value="" disabled>position</option>
          <option *ngFor="let position of app.positions" [value]="position.id">
            {{ position.name }}
          </option>
        </select>
        <div
          *ngIf="
            positionId?.invalid &&
            (positionId?.dirty || positionId?.touched || isSubmitForm)
          "
          class="invalid-feedback"
        >
          <div *ngIf="positionId?.errors?.['required']">
            Position is required.
          </div>
        </div>
      </div>

      <div class="offset-md-5">
        <button
          type="submit"
          [class]="{ btn: true, 'btn-success': !isEdit, 'btn-info': isEdit }"
        >
          {{ btnName }}
        </button>
      </div>
    </form>
  </div>
</ng-template>
